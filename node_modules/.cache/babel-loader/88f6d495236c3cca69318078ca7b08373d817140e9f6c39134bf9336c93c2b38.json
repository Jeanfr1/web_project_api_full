{"ast":null,"code":"import{useEffect,useRef,useState}from\"react\";import{FormValidator,formConfig}from\"../utils/formValidator\";import closeIcon from\"../images/close-icon.png\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PopupWithForm(_ref){let{title,name,onSubmit,children,isOpen,onClose,buttonText}=_ref;const formRef=useRef();const overlayRef=useRef();const close=()=>{onClose();formRef.current.reset();resetValidation();};const handleCloseClick=()=>{close();};const handleCloseClickOverlay=e=>{if(e.target===overlayRef.current){close();}};const enableValidation=()=>{new FormValidator({formElement:formRef.current,config:formConfig}).enableValidation();};const resetValidation=()=>{new FormValidator({formElement:formRef.current,config:formConfig}).resetValidation();};useEffect(()=>{if(isOpen){enableValidation();}},[isOpen]);return/*#__PURE__*/_jsx(\"section\",{className:`popup ${isOpen?\"popup_opened\":\"\"} popup_${name}`,ref:overlayRef,onClick:handleCloseClickOverlay,children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup__container\",id:\"cards-form\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"popup__close-button\",onClick:handleCloseClick,children:/*#__PURE__*/_jsx(\"img\",{className:\"popup__close-button-img\",src:closeIcon,alt:\"\\xCDcone para fechar o popup\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"popup__title\",children:title}),/*#__PURE__*/_jsxs(\"form\",{name:name,className:`popup__form popup__form_${name}`,ref:formRef,noValidate:true,onSubmit:onSubmit,children:[children,/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"popup__input-submit\",children:buttonText})]})]})});}export default PopupWithForm;","map":{"version":3,"names":["useEffect","useRef","useState","FormValidator","formConfig","closeIcon","jsx","_jsx","jsxs","_jsxs","PopupWithForm","_ref","title","name","onSubmit","children","isOpen","onClose","buttonText","formRef","overlayRef","close","current","reset","resetValidation","handleCloseClick","handleCloseClickOverlay","e","target","enableValidation","formElement","config","className","ref","onClick","id","type","src","alt","noValidate"],"sources":["/Users/marielaidin/Desktop/web_project_api_full/src/components/PopupWithForm.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { FormValidator, formConfig } from \"../utils/formValidator\";\nimport closeIcon from \"../images/close-icon.png\";\n\nfunction PopupWithForm({\n  title,\n  name,\n  onSubmit,\n  children,\n  isOpen,\n  onClose,\n  buttonText,\n}) {\n  const formRef = useRef();\n  const overlayRef = useRef();\n\n  const close = () => {\n    onClose();\n    formRef.current.reset();\n    resetValidation();\n  };\n\n  const handleCloseClick = () => {\n    close();\n  };\n\n  const handleCloseClickOverlay = (e) => {\n    if (e.target === overlayRef.current) {\n      close();\n    }\n  };\n\n  const enableValidation = () => {\n    new FormValidator({\n      formElement: formRef.current,\n      config: formConfig,\n    }).enableValidation();\n  };\n\n  const resetValidation = () => {\n    new FormValidator({\n      formElement: formRef.current,\n      config: formConfig,\n    }).resetValidation();\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      enableValidation();\n    }\n  }, [isOpen]);\n\n  return (\n    <section\n      className={`popup ${isOpen ? \"popup_opened\" : \"\"} popup_${name}`}\n      ref={overlayRef}\n      onClick={handleCloseClickOverlay}\n    >\n      <div className=\"popup__container\" id=\"cards-form\">\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          onClick={handleCloseClick}\n        >\n          <img\n            className=\"popup__close-button-img\"\n            src={closeIcon}\n            alt=\"Ãcone para fechar o popup\"\n          />\n        </button>\n        <h2 className=\"popup__title\">{title}</h2>\n        <form\n          name={name}\n          className={`popup__form popup__form_${name}`}\n          ref={formRef}\n          noValidate\n          onSubmit={onSubmit}\n        >\n          {children}\n          <button type=\"submit\" className=\"popup__input-submit\">\n            {buttonText}\n          </button>\n        </form>\n      </div>\n    </section>\n  );\n}\n\nexport default PopupWithForm;\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACnD,OAASC,aAAa,CAAEC,UAAU,KAAQ,wBAAwB,CAClE,MAAO,CAAAC,SAAS,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjD,QAAS,CAAAC,aAAaA,CAAAC,IAAA,CAQnB,IARoB,CACrBC,KAAK,CACLC,IAAI,CACJC,QAAQ,CACRC,QAAQ,CACRC,MAAM,CACNC,OAAO,CACPC,UACF,CAAC,CAAAP,IAAA,CACC,KAAM,CAAAQ,OAAO,CAAGlB,MAAM,CAAC,CAAC,CACxB,KAAM,CAAAmB,UAAU,CAAGnB,MAAM,CAAC,CAAC,CAE3B,KAAM,CAAAoB,KAAK,CAAGA,CAAA,GAAM,CAClBJ,OAAO,CAAC,CAAC,CACTE,OAAO,CAACG,OAAO,CAACC,KAAK,CAAC,CAAC,CACvBC,eAAe,CAAC,CAAC,CACnB,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7BJ,KAAK,CAAC,CAAC,CACT,CAAC,CAED,KAAM,CAAAK,uBAAuB,CAAIC,CAAC,EAAK,CACrC,GAAIA,CAAC,CAACC,MAAM,GAAKR,UAAU,CAACE,OAAO,CAAE,CACnCD,KAAK,CAAC,CAAC,CACT,CACF,CAAC,CAED,KAAM,CAAAQ,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAI,CAAA1B,aAAa,CAAC,CAChB2B,WAAW,CAAEX,OAAO,CAACG,OAAO,CAC5BS,MAAM,CAAE3B,UACV,CAAC,CAAC,CAACyB,gBAAgB,CAAC,CAAC,CACvB,CAAC,CAED,KAAM,CAAAL,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI,CAAArB,aAAa,CAAC,CAChB2B,WAAW,CAAEX,OAAO,CAACG,OAAO,CAC5BS,MAAM,CAAE3B,UACV,CAAC,CAAC,CAACoB,eAAe,CAAC,CAAC,CACtB,CAAC,CAEDxB,SAAS,CAAC,IAAM,CACd,GAAIgB,MAAM,CAAE,CACVa,gBAAgB,CAAC,CAAC,CACpB,CACF,CAAC,CAAE,CAACb,MAAM,CAAC,CAAC,CAEZ,mBACET,IAAA,YACEyB,SAAS,CAAE,SAAShB,MAAM,CAAG,cAAc,CAAG,EAAE,UAAUH,IAAI,EAAG,CACjEoB,GAAG,CAAEb,UAAW,CAChBc,OAAO,CAAER,uBAAwB,CAAAX,QAAA,cAEjCN,KAAA,QAAKuB,SAAS,CAAC,kBAAkB,CAACG,EAAE,CAAC,YAAY,CAAApB,QAAA,eAC/CR,IAAA,WACE6B,IAAI,CAAC,QAAQ,CACbJ,SAAS,CAAC,qBAAqB,CAC/BE,OAAO,CAAET,gBAAiB,CAAAV,QAAA,cAE1BR,IAAA,QACEyB,SAAS,CAAC,yBAAyB,CACnCK,GAAG,CAAEhC,SAAU,CACfiC,GAAG,CAAC,8BAA2B,CAChC,CAAC,CACI,CAAC,cACT/B,IAAA,OAAIyB,SAAS,CAAC,cAAc,CAAAjB,QAAA,CAAEH,KAAK,CAAK,CAAC,cACzCH,KAAA,SACEI,IAAI,CAAEA,IAAK,CACXmB,SAAS,CAAE,2BAA2BnB,IAAI,EAAG,CAC7CoB,GAAG,CAAEd,OAAQ,CACboB,UAAU,MACVzB,QAAQ,CAAEA,QAAS,CAAAC,QAAA,EAElBA,QAAQ,cACTR,IAAA,WAAQ6B,IAAI,CAAC,QAAQ,CAACJ,SAAS,CAAC,qBAAqB,CAAAjB,QAAA,CAClDG,UAAU,CACL,CAAC,EACL,CAAC,EACJ,CAAC,CACC,CAAC,CAEd,CAEA,cAAe,CAAAR,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}