{"ast":null,"code":"class Api{constructor(baseUrl,options){this._baseUrl=baseUrl;this._options=options;}_makeRequest(endpoint){let method=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"GET\";let body=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;const options={method,headers:{...this._options.headers}};if(body){options.headers[\"Content-Type\"]=\"application/json\";options.body=JSON.stringify(body);}return fetch(`${this._baseUrl}${endpoint}`,options).then(res=>{if(!res.ok){return Promise.reject(`Error: ${res.status}`);}return res.json();});}getInitialCards(){return this._makeRequest(\"/cards\");}createNewCard(_ref){let{name,link}=_ref;return this._makeRequest(\"/cards\",\"POST\",{name,link});}deleteCard(cardId){return this._makeRequest(`/cards/${cardId}`,\"DELETE\");}addLikes(cardId){return this._makeRequest(`/cards/likes/${cardId}`,\"PUT\");}removeLikes(cardId){return this._makeRequest(`/cards/likes/${cardId}`,\"DELETE\");}getUserInfo(){return this._makeRequest(\"/users/me\");}editProfile(userData){return this._makeRequest(\"/users/me\",\"PATCH\",userData);}editAvatar(_ref2){let{avatar}=_ref2;return this._makeRequest(\"/users/me/avatar\",\"PATCH\",{avatar});}changeLikeCardStatus(cardId,isLiked){return isLiked?this.removeLikes(cardId):this.addLikes(cardId);}}const api=new Api(\"http://localhost:3001\",{headers:{Authorization:`Bearer ${localStorage.getItem(\"jwt\")}`,\"Content-Type\":\"application/json\"}});export default api;","map":{"version":3,"names":["Api","constructor","baseUrl","options","_baseUrl","_options","_makeRequest","endpoint","method","arguments","length","undefined","body","headers","JSON","stringify","fetch","then","res","ok","Promise","reject","status","json","getInitialCards","createNewCard","_ref","name","link","deleteCard","cardId","addLikes","removeLikes","getUserInfo","editProfile","userData","editAvatar","_ref2","avatar","changeLikeCardStatus","isLiked","api","Authorization","localStorage","getItem"],"sources":["/Users/marielaidin/Desktop/web_project_api_full/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor(baseUrl, options) {\n    this._baseUrl = baseUrl;\n    this._options = options;\n  }\n\n  _makeRequest(endpoint, method = \"GET\", body = null) {\n    const options = {\n      method,\n      headers: { ...this._options.headers },\n    };\n\n    if (body) {\n      options.headers[\"Content-Type\"] = \"application/json\";\n      options.body = JSON.stringify(body);\n    }\n\n    return fetch(`${this._baseUrl}${endpoint}`, options).then((res) => {\n      if (!res.ok) {\n        return Promise.reject(`Error: ${res.status}`);\n      }\n      return res.json();\n    });\n  }\n\n  getInitialCards() {\n    return this._makeRequest(\"/cards\");\n  }\n\n  createNewCard({ name, link }) {\n    return this._makeRequest(\"/cards\", \"POST\", { name, link });\n  }\n\n  deleteCard(cardId) {\n    return this._makeRequest(`/cards/${cardId}`, \"DELETE\");\n  }\n\n  addLikes(cardId) {\n    return this._makeRequest(`/cards/likes/${cardId}`, \"PUT\");\n  }\n\n  removeLikes(cardId) {\n    return this._makeRequest(`/cards/likes/${cardId}`, \"DELETE\");\n  }\n\n  getUserInfo() {\n    return this._makeRequest(\"/users/me\");\n  }\n\n  editProfile(userData) {\n    return this._makeRequest(\"/users/me\", \"PATCH\", userData);\n  }\n\n  editAvatar({ avatar }) {\n    return this._makeRequest(\"/users/me/avatar\", \"PATCH\", { avatar });\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return isLiked ? this.removeLikes(cardId) : this.addLikes(cardId);\n  }\n}\n\nconst api = new Api(\"http://localhost:3001\", {\n  headers: {\n    Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}